var is_device=detectmob();var is_mobile=is_mobile||detectmob();var full_screen=full_screen||detectmob();var bootstrap_js=current_script();var is_minified=bootstrap_js.endsWith('.min.js');var is_loaded=false;function detectmob(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))
return true;return false;}
function current_script(){var scripts=document.getElementsByTagName('script');return scripts[scripts.length-1].src;}
function load_script(src,callback){var el=document.createElement("script");el.type="application/javascript";el.src=src;if(callback)el.onload=callback;document.body.appendChild(el);}
function update_dom(){var game_div=$('#game');if(is_device||full_screen){game_div.removeClass("center");game_div.removeClass("portrait");game_div.addClass("fullscreen");document.body.setAttribute('id','background');}else{game_div.removeClass("fullscreen");game_div.addClass("center");if(is_mobile)game_div.addClass("portrait");else game_div.removeClass("portrait");document.body.setAttribute('id','background0');}}
function load_game(){var dimens_js="js/dimens"+(is_mobile?".mobile":"")+".js";if(is_minified)
dimens_js="dimens"+(is_mobile?".mob":".min")+".js";load_script(dimens_js,function(){if(is_loaded)
App.prototype.restart();else{if(is_minified){load_script("app.min.js");}else{load_script("js/common.js");load_script("app.js");}
is_loaded=true;}});}
function switch_mode(update=false){var width=window.innerWidth;if(!full_screen&&width<560){console.log("Switching to full screen mode");full_screen=true;update=true;}
else if(full_screen&&width>=560&&!is_device){console.log("Switching to frame mode");full_screen=false;update=true;}
if(!is_mobile&&window.innerWidth<1024){console.log("Switching to portrait mode");is_mobile=true;update=true;}
else if(is_mobile&&window.innerWidth>=1024){console.log("Switching to landscape mode");is_mobile=false;update=true;}
if(update){update_dom();load_game();}}
window.onload=function(){switch_mode(true);}
window.onresize=function(){if(!is_loaded)return;switch_mode();}